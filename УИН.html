
<style>
  .thumb {
    height: 75px;
    border: 1px solid #000;
    margin: 10px 5px 0 0;
  }

  div {
    margin-bottom: 10px;
    padding-bottom: 10px;
    padding-left: 10px;
    padding-right: 10px;
    padding-top: 1px;
  }
  div#border {
    border: 1px dotted red;
    margin: 20px;
  }
  div#outline {
    outline: 1px solid red;
    outline-offset: -2px;
  }
</style>

<div id="outline">
  <p>
    Формирование УИН ФССП России для судебного акта, администрируемого ФССП России, по запросу суда
  </p>
  <p>
    <a
      href="https://fssp.gov.ru/files/fssp/db/files/00smev2022/trebovaniya_k_formirovaniu_uin_v4_20220620_20226271547.pdf"
      >Требования к формированию уникального идентификатора начислений в
      документах ФССП России, предназначенного для идентификации начисления</a
    >, опубликованы на
    <a href="https://fssp.gov.ru/mvv_fssp/">сайте ФССП России</a>. Согласно
    данных требований для формирования УИН достаточно знания регистрационного номера, присвоенного территориальным органом ФССП России - администратором дохода, запроса суда в формате n..n/yy/rr000.</p>
</div>

<div id="border">
  <p class="name">Укажите регистрационный номер входящего запроса суда о предоставлении УИН для получения УИН, или УИН для получения номера запроса суда</p>
  <label for="editboxNo">Вх.№ запроса: </label>
  <input
    type="text"
    id="editboxNo"
    value="123456/23/24000"
    placeholder="n..n/yy/rr000"
  />
  <>
  <label for="editboxUIN">УИН суд.акта: </label>
  <input
    type="text"
    id="editboxUIN"
    value="32224000230123456992"
    placeholder="322....00 (20 цифр)"
  />
  <br><h5>
  <label id="labelUINType"></label>
</div>

<div id="outline">
<p>
  Порядок действий при получении запроса суда о предоставлении УИН для включения в судебный акт
</p>
<p>
  1. Зарегистрировать входящий запрос суда о предоставлении УИН в подсистеме ЭД.<br>
  2. С помощью данной веб-страницы сформировать УИН и направить его в суд. Информация, введенная в поля данной веб-страницы нигде не сохраняется.<br>
  3. Обратить внимание на отсутствие в составе запроса судебного акта или информации о нем (письмо СД при ВС РФ от 24.04.2023 № СД-АП/650). Рассматривать отсутствие указанной информации, как отсутствие основания для начисления.<br>  
  4. Принять к сведению, что, несмотря на наличие УИН, начисление в ГИС ГМП не будет сформировано (ни ФССП России, ни судом) и на ЕПГУ не появится возможность оплаты по данному УИН.<br>
  5. Дождаться предъявления судебного акта на принудительное исполнение в один из отделов судебных приставов и возбуждения исполнительного производства. Отметить, что АИС ФССП России в день возбуждения или на следующий день автоматически сформирует начисление в ГИС ГМП и на ЕПГУ появится возможность оплаты по данному УИН.
</p>
</div>






<script>
  // автор: Гирич Петр Николаевич, girich@fssp.gov.ru
  // 16.05.2023 

  //===========================
  // Контрольный разряд уникального идентификатора начисления рассчитывается в следующем порядке:
  // каждому разряду уникального идентификатора начисления (первые 19 разрядов для 20-значного либо первые 24 разряда для 25-значного уникального идентификатора начисления), начиная со старшего разряда, присваивается весовой коэффициент, соответствующий повторяющемуся ряду чисел от 1 до 10;
  // рассчитываются произведения значений разрядов на соответствующие весовые коэффициенты и вычисляется сумма полученных произведений;
  // контрольный разряд уникального идентификатора начисления представляет собой остаток от деления полученной суммы на модуль 11 и должен иметь значение от 0 до 9;
  // если полученный остаток равен 10, проводится повторный расчет с применением второй последовательности весовых коэффициентов, являющейся результатом циклического сдвига исходной последовательности на два разряда влево (3, 4, 5, 6, 7, 8, 9, 10, 1, 2);
  // в случае если при повторном расчете остаток от деления вновь сохраняется равным 10, то значение контрольного разряда признается равным нулю ("0").
  //===========================
  // Получить контрольный разряд УИН
  function getControlSum(strUin, startVes) {
    var controlSum = 0;
    for (var i = 0; i < strUin.length; i++) {
      var ves = ((i + startVes - 1) % 10) + 1;
      controlSum += Number(strUin[i]) * ves;
      //spanText = spanText + '<br> ==> ' + strUin[i] + ' -> ' + ves;
    }
    return controlSum % 11;
  }

  //===========================
  // Получить УИН по номеру
  function getUin(lninp) {
    // валидация элементов номера
    const valRegExp = /^\d{1,7}\/2\d{1}\/\d{2}000$/g
    var validNo = valRegExp.exec(lninp);
    var uin = 'Неверно указан номер регистрационный номер входящего запроса суда';
    // Для валидного номера ИП рассчитываем УИН
    if (validNo) {
    // Выделяем фрагменты номера
      var aln = validNo[0].toUpperCase().trim().split('/');
      var uin19 = '322' + aln[2] + aln[1] + ('0000000' + aln[0]).slice(-7) + '99';
      var crc = getControlSum(uin19, 1);
      if (crc == 10) {
        crc = getControlSum(uin19, 3);
        if (crc == 10) {
          crc = 0;
        }
      }
      uin = uin19 + crc;
    }
    return uin;
  }

  //===========================
  // Получить номер запроса по УИН
  function getNo(lninp) {
    let res = lninp.substring(10, 17).replace(/^0+/, '') +
      '/' +
      lninp.substring(8, 10) +
      '/' +
      lninp.substring(3, 8);
    return res; 
  }

  //===========================
  // Отобразить тип УИН
  function detectUINType() {
    let uin = document.getElementById('editboxUIN').value;
    let uinType = uin.substring(17, 19);
    let uinId = uinTypeId.indexOf(uinType);
    let uinTypeText =  'Неверно указан номер регистрационный номер входящего запроса суда';
    if (uinId >= 0) uinTypeText = '* Тип УИН: '+uinTypeName[uinId];
    document.getElementById('labelUINType').innerHTML = uinTypeText;
  }

  //===========================
  // Обработка поля ввода
  function handleInputBoxNo(evt) {
    var ln = evt.target.value;
    document.getElementById('editboxUIN').value = getUin(ln);
    detectUINType('editboxUIN');
  }
  function handleInputBoxUIN(evt) {
    var ln = evt.target.value;
    document.getElementById('editboxNo').value = getNo(ln) ;
    detectUINType();
  }

  // тело скрипта

  // определяем массив видов начисление
  const uinTypeId = ['00','01','02','03','04','05','06','07','08','09','10','11','99'];
  const uinTypeName = [
    'Взыскания по исполнительным производствам',
    'Денежные взыскания Российской Федерации об административных правонарушениях, по делам, подведомственным ФССП России',
    'Возмещение расходов по совершению исполнительских действий, осуществленных Федеральной службой судебных приставов за счет средств федерального бюджета (исполнительские действия в бюджет)','Прочие поступления от денежных взысканий (штрафов) и иных сумм в возмещение ущерба, зачисляемые в федеральный бюджет (материальный ущерб)',
    'Исполнительский сбор',
    'Денежные средства, поступающие от реализации конфискованного имущества/обращения в доход государства',
    'Денежные взыскания (штрафы), установленные УК РФ (уголовные штрафы)',
    'Доходы, поступающие в порядке возмещения федеральному бюджету средств, выплаченных на покрытие процессуальных издержек (процессуальные издержки)',
    'Доходы, поступающие в порядке компенсации затрат на мероприятия, проводимые за счет бюджета (компенсация затрат)',
    'Иные взыскания имущественного характера в пользу бюджетной системы РФ',
    'Денежные взыскания, налагаемые судами (судебные штрафы)',
    'Денежные взыскания (штрафы), установленные Кодексом Российской Федерации об административных правонарушениях, по делам, не подведомственным ФССП России',
    'Денежные взыскания (штрафы), установленные Кодексом Российской Федерации об административных правонарушениях, по делам, не подведомственным ФССП России (сведения о судебном акте не предоставлены)'
  ];

  // установка обработчиков событий
  document
    .getElementById('editboxNo')
    .addEventListener('input', handleInputBoxNo, false);
  document
    .getElementById('editboxUIN')
    .addEventListener('input', handleInputBoxUIN, false);

</script>
